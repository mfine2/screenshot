<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <style type="text/css">
        * {
            text-align: center;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <img src="mm.jpg" alt="mm" id="img" />
    <script type="text/javascript">
        var imgEl = document.getElementById("img");

        function request () {
            var url = "/getDataUrl/";

            var xhr = new XMLHttpRequest();

            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        var src = xhr.responseText;
                        if(src) {
                            imgEl.src = src;
                        }
                    } else {
                        console.log("dataUrl send faild");
                    }
                }
            };

            xhr.open("GET", url, true);
            xhr.send();

            setTimeout(function(){
                request();
            }, 100);
        }

        setTimeout(function(){
            request();
        }, 1000);
    </script>
</body>
</html>
